<!DOCTYPE html>
<html lang="en">
  <%- include("./head",{title})%>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light" id="navbar">
      <div class="container">
        <a class="navbar-brand" href="/">
          <img src="/public/images/favicon.ico" alt="" width="35" height="35" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="/">Home</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/subreddits/">Subreddits</a>
            </li>

            <% if(!currentUser) {%>
            <li class="nav-item">
              <a class="nav-link" href="/user/register">Register</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/user/login">Login</a>
            </li>
            <%} else {%>
            <li class="nav-item">
              <a class="nav-link" href="/posts/new">Create Post</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/subreddits/create">Create Community</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" class="nav-link" href="/user/logout"
                >Logout</a
              >
            </li>

            <li class="nav-item currentUser" id="userProfile">
              <%if(currentUser){%>
              <a
                class="nav-link"
                href="/user/<%=currentUser.username%>"
                title="<%=currentUser.username%>"
              >
                <img
                  src="<%=currentUser.profileImage%>"
                  alt="image not found"
                  style="width: 22px; height: 22px; border-radius: 10px"
                />
                <%=currentUser.username%>
              </a>
              <%}%>
            </li>

            <%}%>
          </ul>
          <form
            action="/posts/search/"
            method="GET"
            autocomplete="off"
            class="d-flex form-search-posts"
          >
            <input
              class="form-control me-2"
              type="search"
              placeholder="search..."
              aria-label="Search"
              id="search"
              name="q"
            />

            <button class="search-button" id="submit" type="submit">
              Search
            </button>
          </form>
        </div>
      </div>
    </nav>
  </body>
</html>
